!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("plotly.js/dist/plotly.min.js"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-plotly.js",["exports","@angular/core","plotly.js/dist/plotly.min.js","@angular/common"],e):e((t["angular-plotly"]=t["angular-plotly"]||{},t["angular-plotly"].js={}),t.ng.core,t.Plotlyjs,t.ng.common)}(this,function(t,i,e,n){"use strict";var r,o;(o=r||(r={})).Figure=function(){},o.PlotlyHTMLElement=function(){};var s=function(){function a(){if(this.plotly=e,"undefined"==typeof this.plotly)throw new Error("Peer dependency plotly.js isn't installed")}return a.insert=function(t){return-1===a.instances.indexOf(t)&&a.instances.push(t),t},a.remove=function(t){var e=a.instances.indexOf(t);0<=e&&a.instances.splice(e,1)},a.prototype.newPlot=function(t,e,n,i){return this.plotly.newPlot(t,e,n,i).then(function(t){return a.insert(t)})},a.prototype.plot=function(t,e,n,i){return this.plotly.plot(t,e,n,i)},a.prototype.update=function(t,e,n,i){return this.plotly.update(t,e,n,i)},a.prototype.resize=function(t){return this.plotly.Plots.resize(t)},a.prototype.getPlotly=function(){return this.plotly},a.prototype.getInstanceByDivId=function(t){try{for(var e=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(a.instances),n=e.next();!n.done;n=e.next()){var i=n.value;if(i.id===t)return i}}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=e["return"])&&o.call(e)}finally{if(r)throw r.error}}return undefined;var r,o},a}();s.instances=[],s.decorators=[{type:i.Injectable}],s.ctorParameters=function(){return[]};var a=function(){function t(t,e,n){this.plotly=t,this.iterableDiffers=e,this.keyValueDiffers=n,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.initialized=new i.EventEmitter,this.update=new i.EventEmitter,this.purge=new i.EventEmitter,this.error=new i.EventEmitter,this.afterExport=new i.EventEmitter,this.afterPlot=new i.EventEmitter,this.animated=new i.EventEmitter,this.animatingFrame=new i.EventEmitter,this.animationInterrupted=new i.EventEmitter,this.autoSize=new i.EventEmitter,this.beforeExport=new i.EventEmitter,this.buttonClicked=new i.EventEmitter,this.click=new i.EventEmitter,this.clickAnnotation=new i.EventEmitter,this.deselect=new i.EventEmitter,this.doubleClick=new i.EventEmitter,this.framework=new i.EventEmitter,this.hover=new i.EventEmitter,this.legendClick=new i.EventEmitter,this.legendDoubleClick=new i.EventEmitter,this.relayout=new i.EventEmitter,this.restyle=new i.EventEmitter,this.redraw=new i.EventEmitter,this.selected=new i.EventEmitter,this.selecting=new i.EventEmitter,this.sliderChange=new i.EventEmitter,this.sliderEnd=new i.EventEmitter,this.sliderStart=new i.EventEmitter,this.transitioning=new i.EventEmitter,this.transitionInterrupted=new i.EventEmitter,this.unhover=new i.EventEmitter,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","click","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover"]}return t.prototype.ngOnInit=function(){var e=this;this.createPlot().then(function(){var t=e.createFigure();e.initialized.emit(t)})},t.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined);var t=this.createFigure();this.purge.emit(t),s.remove(this.plotlyInstance)},t.prototype.ngOnChanges=function(t){var e=!1,n=t.revision;n&&!n.isFirstChange()&&(e=!0);var i=t.debug;i&&!i.isFirstChange()&&(e=!0),e&&this.updatePlot(),this.updateWindowResizeHandler()},t.prototype.ngDoCheck=function(){var t=!1;this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(t=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=undefined;this.dataDiffer?this.dataDiffer.diff(this.data)&&(t=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=undefined;t&&this.plotlyInstance&&this.updatePlot()},t.prototype.getWindow=function(){return window},t.prototype.getClassName=function(){var t=[this.defaultClassName];return Array.isArray(this.className)?t=t.concat(this.className):this.className&&t.push(this.className),t.join(" ")},t.prototype.createPlot=function(){var i=this;return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config).then(function(n){i.plotlyInstance=n,i.getWindow().gd=i.debug?n:undefined,i.eventNames.forEach(function(e){var t="plotly_"+e.toLowerCase();n.on(t,function(t){return i[e].emit(t)})}),i.updateWindowResizeHandler()},function(t){console.error("Error while plotting:",t),i.error.emit(t)})},t.prototype.createFigure=function(){var t=this.plotlyInstance;return{data:t.data,layout:t.layout,frames:t._transitionData?t._transitionData._frames:null}},t.prototype.updatePlot=function(){var e=this;if(!this.plotlyInstance){var t=new Error("Plotly component wasn't initialized");throw this.error.emit(t),t}return this.createPlot().then(function(){var t=e.createFigure();e.update.emit(t)})},t.prototype.updateWindowResizeHandler=function(){var t=this;this.useResizeHandler?this.resizeHandler===undefined&&(this.resizeHandler=function(){return t.plotly.resize(t.plotlyInstance)},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=undefined)},t.prototype.dataDifferTrackBy=function(t,e){var n=Object.assign({},e,{uid:""});return JSON.stringify(n)},t}();a.decorators=[{type:i.Component,args:[{selector:"plotly-plot",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>',providers:[s]}]}],a.ctorParameters=function(){return[{type:s},{type:i.IterableDiffers},{type:i.KeyValueDiffers}]},a.propDecorators={plotEl:[{type:i.ViewChild,args:["plot"]}],data:[{type:i.Input}],layout:[{type:i.Input}],config:[{type:i.Input}],style:[{type:i.Input}],divId:[{type:i.Input}],revision:[{type:i.Input}],className:[{type:i.Input}],debug:[{type:i.Input}],useResizeHandler:[{type:i.Input}],initialized:[{type:i.Output}],update:[{type:i.Output}],purge:[{type:i.Output}],error:[{type:i.Output}],afterExport:[{type:i.Output}],afterPlot:[{type:i.Output}],animated:[{type:i.Output}],animatingFrame:[{type:i.Output}],animationInterrupted:[{type:i.Output}],autoSize:[{type:i.Output}],beforeExport:[{type:i.Output}],buttonClicked:[{type:i.Output}],click:[{type:i.Output}],clickAnnotation:[{type:i.Output}],deselect:[{type:i.Output}],doubleClick:[{type:i.Output}],framework:[{type:i.Output}],hover:[{type:i.Output}],legendClick:[{type:i.Output}],legendDoubleClick:[{type:i.Output}],relayout:[{type:i.Output}],restyle:[{type:i.Output}],redraw:[{type:i.Output}],selected:[{type:i.Output}],selecting:[{type:i.Output}],sliderChange:[{type:i.Output}],sliderEnd:[{type:i.Output}],sliderStart:[{type:i.Output}],transitioning:[{type:i.Output}],transitionInterrupted:[{type:i.Output}],unhover:[{type:i.Output}]};var u=function(){};u.decorators=[{type:i.NgModule,args:[{imports:[n.CommonModule],declarations:[a],exports:[a]}]}],u.ctorParameters=function(){return[]},t.PlotlyModule=u,t.PlotComponent=a,t.PlotlyService=s,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-plotly.js.umd.min.js.map
